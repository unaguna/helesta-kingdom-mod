add_namespace = helesta

# Event for Helesta that Japan wants to surrender
country_event = {
	id = helesta.1
	title = helesta.1.t
	desc = helesta.1.desc
	picture = GFX_report_event_japanese_chinese_surrender

	is_triggered_only = yes
	
	# We accept their surrender.
	option = {
		name = helesta.1.a
		effect_tooltip = {
			every_state = {
				limit = {
                    OWNER = {
                        OR = {
                            original_tag = JAP
                            is_subject_of = JAP
                        }
                    }
					is_claimed_by = HEL
                    CONTROLLER = {
                        OR = {
                            original_tag = JAP
                            is_subject_of = JAP
                            original_tag = HEL
                            is_subject_of = HEL
                        }
                    }
				}
				HEL = {
					transfer_state = PREV
				}
			}
		}
		JAP = {
			country_event = { id = helesta.2 }
		}
		
		ai_chance = {
			factor = 90
		}
	}
    
	# No surrender! We want total victory!
	option = {
		name = helesta.1.b
		JAP = {
			country_event = { id = helesta.3 }
		}
		
		ai_chance = { # If Japan has lots of major enemies, the AI will not make a separate peace
			factor = 0
			modifier = {
				add = 50
				USA = {
					has_war_with = JAP
					NOT = {
						has_war_with = ROOT
					}
				}
			}
			modifier = {
				add = 40
				ENG = {
					has_war_with = JAP
					NOT = {
						has_war_with = ROOT
					}
				}
			}
			modifier = {
				add = 30
				SOV = {
					has_war_with = JAP
					NOT = {
						has_war_with = ROOT
					}
				}
			}
			modifier = {
				add = 20
				FRA = {
					has_war_with = JAP
					NOT = {
						has_war_with = ROOT
					}
				}
			}
			modifier = {
				add = 10
				GER = {
					has_war_with = JAP
					NOT = {
						has_war_with = ROOT
					}
				}
			}
			modifier = {
				add = 10
				HOL = {
					has_war_with = JAP
					NOT = {
						has_war_with = ROOT
					}
				}
			}
			modifier = {
				add = 10
				ITA = {
					has_war_with = JAP
					NOT = {
						has_war_with = ROOT
					}
				}
			}
		}
	}
}

# Event for Japan that Helesta has accepted
country_event = {
	id = helesta.2
	title = helesta.2.t
	desc = helesta.2.desc
	picture = GFX_report_event_japanese_chinese_surrender

	is_triggered_only = yes
	
	# They have accepted.
	option = {
		name = helesta.2.a
		every_state = {
			limit = {
				OWNER = {
					OR = {
						original_tag = JAP
						is_subject_of = JAP
					}
				}
				is_claimed_by = HEL
				CONTROLLER = {
					OR = {
						original_tag = JAP
						is_subject_of = JAP
						original_tag = HEL
						is_subject_of = HEL
					}
				}
			}
			HEL = {
				transfer_state = PREV
				white_peace = JAP
			}
		}
		hidden_effect = {
			set_truce = {
				target = HEL
				days = 730
			}
		}
	}
}

# Event for Helesta that China has rejected
country_event = {
	id = helesta.3
	title = helesta.3.t
	desc = helesta.3.desc
	picture = GFX_report_event_japanese_chinese_surrender

	is_triggered_only = yes
	
	# They have rejected our surrender offer.
	option = {
		name = helesta.3.a
	}
}